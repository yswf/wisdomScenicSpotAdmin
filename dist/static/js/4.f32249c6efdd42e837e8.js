webpackJsonp([4],{"/y9h":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("3a+u"),o={name:"Reset",data:function(){var e=function(e,t,r){Object(s.b)(t)?r():r(new Error("密码必须是数字+字母的组合，最少6位，最多20位"))};return{resetForm:{phoneNumber:"",code:"",newPassword:"",confirmPassword:""},resetFormRules:{phoneNumber:[{required:!0,trigger:"blur",validator:function(e,t,r){Object(s.c)(t)?r():r(new Error("手机号格式不正确"))}}],code:[{required:!0,trigger:"blur",validator:function(e,t,r){Object(s.a)(t)?r():r(new Error("请输入正确的验证码"))}}],newPassword:[{required:!0,trigger:"blur",validator:e}],confirmPassword:[{required:!0,trigger:"blur",validator:e}]},loading:!1,redirect:void 0,word:"获取验证码",isOvertime:!1,time:60,checked:!1}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{confirmPsw:function(){this.resetForm.newPassword!==this.resetForm.confirmPassword&&(this.$message.closeAll(),this.$message.warning("两次密码输入不一致"))},sendMessage:function(){var e=this;if(this.isOvertime)return!1;var t={phone:this.resetForm.phoneNumber};return t.phone?Object(s.c)(t.phone)?(this.loading=!0,void this.$request.httpRequest({method:"post",url:this.API.SendSms,returnFullData:!0,noLoading:!0,hideErrorMsg:!0,params:t,success:function(t){e.loading=!1,e.$message.closeAll(),e.$message.success("验证码发送成功，请留意手机短信");var r=setInterval(function(){e.isOvertime=!0,e.word=e.time+"s后重新获取",e.time--,e.time<=0&&(e.isOvertime=!1,e.time=60,clearInterval(r),e.word="获取验证码")},1e3)},error:function(t){e.loading=!1;var r=t.hasOwnProperty("resultMessage")?t.resultMessage:"获取验证码失败";e.$message({message:r,type:"error",customClass:"errorloginwidth",duration:3e3})}})):(this.$message.closeAll(),void this.$message.error("手机号格式不正确")):(this.$message.closeAll(),void this.$message.error("请先输入手机号码"))},handleReset:function(){var e=this;this.$refs.resetForm.validate(function(t){if(!t)return!1;e.loading=!0;var r={phone:e.resetForm.phoneNumber,password:e.resetForm.newPassword,vin:e.resetForm.code};e.$request.httpRequest({method:"post",url:e.API.ResetPwd,returnFullData:!0,noLoading:!0,params:r,success:function(t){console.log(t),e.$message.closeAll(),e.$message.success("恭喜重置密码成功，请用新密码登录"),e.loading=!1,e.$router.push({name:"Login"})},error:function(t){e.loading=!1}})})}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"reset-container"},[r("el-form",{ref:"resetForm",staticClass:"reset-form",attrs:{model:e.resetForm,rules:e.resetFormRules,autocomplete:"off","label-position":"left"}},[r("div",{staticClass:"title"},[e._v("\n        智慧景区后台管理系统\n      ")]),e._v(" "),r("el-card",{staticClass:"reset-card",attrs:{shadow:"hover"}},[r("div",{staticClass:"reset-tab"},[r("div",{staticClass:"tab-item"},[e._v("\n            重置密码\n          ")])]),e._v(" "),r("el-form-item",{staticClass:"reset-input-item",attrs:{prop:"phoneNumber"}},[r("el-input",{attrs:{name:"phoneNumber",type:"text",placeholder:"请输入手机号"},model:{value:e.resetForm.phoneNumber,callback:function(t){e.$set(e.resetForm,"phoneNumber",t)},expression:"resetForm.phoneNumber"}})],1),e._v(" "),r("el-form-item",{staticClass:"reset-input-item",attrs:{prop:"code"}},[r("el-input",{attrs:{type:"number",name:"code",placeholder:"请输入短信验证码",maxlength:"4"},model:{value:e.resetForm.code,callback:function(t){e.$set(e.resetForm,"code",t)},expression:"resetForm.code"}}),e._v(" "),r("span",{staticClass:"code",style:{cursor:e.isOvertime?"default":"pointer"},on:{click:e.sendMessage}},[e._v(e._s(e.word))])],1),e._v(" "),r("el-form-item",{staticClass:"reset-input-item",attrs:{prop:"newPassword"}},[r("el-input",{attrs:{"show-password":"",name:"newPassword",placeholder:"设置新的登录密码(数字+字母，最少6位)"},model:{value:e.resetForm.newPassword,callback:function(t){e.$set(e.resetForm,"newPassword",t)},expression:"resetForm.newPassword"}})],1),e._v(" "),r("el-form-item",{staticClass:"reset-input-item",attrs:{prop:"confirmPassword"}},[r("el-input",{attrs:{name:"confirmPassword","show-password":"",placeholder:"再次输入登录密码"},on:{blur:e.confirmPsw},model:{value:e.resetForm.confirmPassword,callback:function(t){e.$set(e.resetForm,"confirmPassword",t)},expression:"resetForm.confirmPassword"}})],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-bottom":"0"}},[r("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleReset(t)}}},[e._v("\n            重 置\n          ")])],1),e._v(" "),r("div",{staticClass:"to-login"},[r("span",{staticClass:"btn",on:{click:function(t){return e.$router.push({name:"Login"})}}},[e._v("立即登录")])])],1)],1)],1)])},staticRenderFns:[]};var n=r("VU/8")(o,a,!1,function(e){r("gxD/"),r("B/Ic")},"data-v-5a9f4d3e",null);t.default=n.exports},"B/Ic":function(e,t,r){var s=r("rQAG");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);r("rjj0")("c4d261aa",s,!0,{})},FfXB:function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,".reset-container .el-input{display:inline-block;width:100%}.reset-container .el-input input{background:transparent;border:0;-webkit-appearance:none;border-radius:0;color:#121d25}.reset-container .el-input input:-webkit-autofill{-webkit-box-shadow:0 0 0 1000px #fff inset!important;-webkit-text-fill-color:#121d25!important}.reset-container .el-form-item{margin-bottom:10px}.reset-container .reset-card{border-radius:8px}.reset-container .reset-card .el-card__body{padding:30px}.reset-container .accept-agreement .el-checkbox{margin-right:0}",""])},"gxD/":function(e,t,r){var s=r("FfXB");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);r("rjj0")("ca676026",s,!0,{})},rQAG:function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,".reset-container[data-v-5a9f4d3e]{position:fixed;height:100%;width:100%;background-color:#f5f5f5}.reset-container .el-form-item[data-v-5a9f4d3e]{margin-bottom:15px}.reset-container .reset-form[data-v-5a9f4d3e]{position:absolute;left:0;right:0;width:400px;max-width:100%;padding:10px;margin:80px auto}.reset-container .reset-form .reset-card .reset-tab[data-v-5a9f4d3e]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 5px 5px}.reset-container .reset-form .reset-card .reset-tab .tab-item[data-v-5a9f4d3e]{font-size:14px;cursor:pointer}.reset-container .reset-form .reset-card .reset-tab .tab-item[data-v-5a9f4d3e]:hover{color:#121d25!important}.reset-container .reset-form .reset-card .el-card__body[data-v-5a9f4d3e]{padding:25px}.reset-container .reset-form .reset-card .reset-input-item[data-v-5a9f4d3e]{border:1px solid rgba(0,0,0,.1);border-radius:5px;color:#454545}.reset-container .reset-form .reset-card .reset-input-item .code[data-v-5a9f4d3e]{position:absolute;right:10px;top:2px;font-size:12px;color:#121d25;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.reset-container .reset-form .reset-card .to-login[data-v-5a9f4d3e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;font-size:12px;margin-top:5px;margin-bottom:-5px}.reset-container .reset-form .reset-card .to-login .btn[data-v-5a9f4d3e]{cursor:pointer}.reset-container .reset-form .reset-card .to-login .btn[data-v-5a9f4d3e]:hover{color:#409eff}.reset-container .reset-form .reset-card .accept-agreement[data-v-5a9f4d3e]{margin-bottom:20px;font-size:12px}.reset-container .reset-form .reset-card .accept-agreement .agreement[data-v-5a9f4d3e]{cursor:pointer}.reset-container .reset-form .reset-card .accept-agreement .agreement[data-v-5a9f4d3e]:hover{color:#409eff}.reset-container .title[data-v-5a9f4d3e]{font-size:28px;color:#121d25;margin:0 auto 20px;text-align:center;letter-spacing:1px}",""])}});
//# sourceMappingURL=4.f32249c6efdd42e837e8.js.map