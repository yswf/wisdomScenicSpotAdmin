webpackJsonp([7],{"9Py0":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".header{margin-bottom:10px}.header .el-input{width:200px}.header .el-button--mini{margin-left:10px}.header .el-button--small{float:right}.activity-info .el-tag--medium{width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;margin:4px 0}.el-popover{width:400px}.pagination{float:right;margin-top:10px}",""])},IUkd:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("DcYu"),n={name:"activityInfo",data:function(){return{search:"",currentPage:1,activityData:[]}},mounted:function(){this.getActivityData()},methods:{getActivityData:function(){var t=this;this.getActivityData=[],Object(i.b)({},"get").then(function(e){if(console.log(11),0!=e.length){for(var a=1,i={},n=0;n<e.length;n++)i={num:a++,id:e[n].id,title:e[n].title,desc:e[n].descs,image:e[n].image},t.activityData.push(i);console.log(t.activityData)}else t.$message.success(e.msg)}).catch(function(e){console.log(22),t.$message.success("获取失败")})},goSearch:function(){var t=this;console.log("清空数据"),this.activityData=[],console.log(this.search);var e={searchWord:this.search};Object(i.f)(e,"get").then(function(e){if(0!=e.length){for(var a=1,i={},n=0;n<e.length;n++)i={num:a++,id:e[n].id,title:e[n].title,desc:e[n].descs,image:e[n].image},t.activityData.push(i);console.log(t.activityData)}else t.$message.success(e.msg)}).catch(function(t){Toast("获取失败")})},handleEdit:function(t,e){this.$router.push({path:"/home/activityInfo/edit",query:{id:e.id,title:e.title,desc:e.desc}})},handleDelete:function(t,e){var a=this;console.log(t,e),Object(i.d)({id:e.id},"post").then(function(t){a.$message.success(t.msg)}).catch(function(t){console.log(22),a.$message.success("删除成功")}),this.getActivityData()},handleCurrentChange:function(t){console.log("当前页: "+t),this.getaActivityData(t)},handleSizeChange:function(t){console.log("每页 "+t+" 条")},getaActivityData:function(t){console.log(t)}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activityInfo"},[a("div",{staticClass:"header"},[a("el-input",{attrs:{size:"small",placeholder:"输入关键字搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.goSearch}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$router.push("/home/activityInfo/edit")}}},[t._v("添加活动咨讯信息")])],1),t._v(" "),a("el-table",{attrs:{data:t.activityData,stripe:"",size:"small","default-sort":{prop:"date",order:"descending"},"cell-style":{padding:"1px 0"},"header-cell-style":{background:"#ddd"}}},[a("el-table-column",{attrs:{prop:"num",label:"序号",sortable:"",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",sortable:"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"咨讯标题",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"资讯内容",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{staticClass:"activity-info",attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("资讯内容:")]),t._v(" "),a("p",[t._v(t._s(e.row.desc))]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.desc))])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"image",label:"图片",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{staticClass:"activity-info",attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("图片链接:")]),t._v(" "),a("p",[t._v(t._s(e.row.image))]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.image))])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":t.currentPage,"page-sizes":[10,20,50],"page-size":10,layout:"total, prev, pager, next, jumper",total:t.activityData.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var l=a("VU/8")(n,s,!1,function(t){a("q6bu")},null,null);e.default=l.exports},q6bu:function(t,e,a){var i=a("9Py0");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("8e60b6a2",i,!0,{})}});
//# sourceMappingURL=7.c2c7bef9ec3fcdea39be.js.map