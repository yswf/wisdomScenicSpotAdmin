webpackJsonp([9],{PNfL:function(e,t,a){var s=a("Z1j/");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("d4231c06",s,!0,{})},"Z1j/":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,".header{margin-bottom:10px}.header .el-input{width:200px}.header .el-button--mini{margin-left:10px}.header .el-button--small{float:right}.el-tag--medium{width:170px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;margin:4px 0}.el-popover{width:400px}.pagination{float:right;margin-top:10px}",""])},dsw8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("DcYu"),n={name:"scenicSpotIntro",data:function(){return{search:"",currentPage:1,spotsData:[]}},watch:{},mounted:function(){this.getSpotsData()},methods:{getSpotsData:function(){var e=this;Object(s.m)({},"get").then(function(t){if(console.log(11),0!=t.length){for(var a=1,s={},n=0;n<t.length;n++)s={num:a++,id:t[n].id,title:t[n].title,time:e.timestampToTime(t[n].startDate)+"~"+e.timestampToTime(t[n].endDate),desc:t[n].descs,image:t[n].image},e.spotsData.push(s);console.log(e.spotsData)}else e.$message.success(t.msg)}).catch(function(t){console.log(22),e.$message.success("获取失败")})},goSearch:function(){var e=this;console.log("清空数据"),this.spotsData=[],console.log(this.search);var t={searchWord:this.search};Object(s.g)(t,"get").then(function(t){if(console.log(11),0!=t.length){for(var a=1,s={},n=0;n<t.length;n++)s={num:a++,id:t[n].id,title:t[n].title,time:e.timestampToTime(t[n].startDate)+"~"+e.timestampToTime(t[n].endDate),desc:t[n].descs,image:t[n].image},e.spotsData.push(s);console.log(e.spotsData)}else e.$message.success(t.msg)}).catch(function(e){Toast("获取失败")})},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")},handleEdit:function(e,t){console.log(t),this.$router.push({path:"/home/scenicSpotIntro/edit",query:{id:t.id,title:t.title,desc:t.desc,startDate:t.time.split("~")[0],endDate:t.time.split("~")[1],image:t.image}})},handleDelete:function(e,t){var a=this;console.log(e,t),Object(s.e)({id:t.id},"post").then(function(e){a.$message.success(e.msg)}).catch(function(e){console.log(22),a.$message.success("删除成功")}),this.getSpotsData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.getaActivityData(e)},handleSizeChange:function(e){console.log("每页 "+e+" 条")}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scenicSpotIntro"},[a("div",{staticClass:"header"},[a("el-input",{attrs:{size:"small",clearable:"",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.goSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.$router.push("/home/scenicSpotIntro/edit")}}},[e._v("添加景点信息")])],1),e._v(" "),a("el-table",{attrs:{data:e.spotsData,stripe:"",size:"small","default-sort":{prop:"date",order:"descending"},"cell-style":{padding:"1px 0"},"header-cell-style":{background:"#ddd"}}},[a("el-table-column",{attrs:{prop:"num",label:"序号",sortable:"",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",sortable:"",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"景点名字",width:"170"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"适游时间",sortable:"",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"介绍",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("介绍:")]),e._v(" "),a("p",[e._v(e._s(t.row.desc))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.desc))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"image",label:"图片",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("图片链接:")]),e._v(" "),a("p",[e._v(e._s(t.row.image))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.image))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,50],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.spotsData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var i=a("VU/8")(n,o,!1,function(e){a("PNfL")},null,null);t.default=i.exports}});
//# sourceMappingURL=9.00b50d0c2321ab4a8464.js.map